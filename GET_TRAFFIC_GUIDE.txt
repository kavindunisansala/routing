╔═══════════════════════════════════════════════════════════════════════════════╗
║     🎯 HOW TO GET WORMHOLE TRAFFIC - TESTING STRATEGIES                     ║
║                    [2025-10-12 17:00 UTC]                                    ║
╚═══════════════════════════════════════════════════════════════════════════════╝

YOUR CURRENT RESULT:
════════════════════
✅ Wormhole tunnels created successfully (1 tunnel)
❌ No packets intercepted (Packets Intercepted: 0)

WHY NO TRAFFIC:
═══════════════
1. Simulation too short (1 second - network still initializing)
2. Malicious nodes at edges (0,1) not in active routes
3. Network hasn't generated enough traffic yet

═══════════════════════════════════════════════════════════════════════════════

🚀 RECOMMENDED TESTS (In Order):
════════════════════════════════

TEST 1: Longer Simulation (30 seconds)
───────────────────────────────────────
cd ~/Downloads/ns-allinone-3.35/ns-3.35
wget -O scratch/routing.cc https://raw.githubusercontent.com/kavindunisansala/routing/master/routing.cc
./waf build
./waf --run "routing --use_enhanced_wormhole=true --simTime=30"

EXPECTED:
  - More time for traffic to flow
  - 6 malicious nodes strategically placed
  - Higher chance of interception

TEST 2: More Nodes, Longer Simulation
──────────────────────────────────────
./waf --run "routing --use_enhanced_wormhole=true --simTime=60 --nWifis=50"

EXPECTED:
  - 50 nodes → ~10 malicious (20% attack percentage)
  - ~5 wormhole tunnels
  - More traffic volume

TEST 3: Even More Aggressive (100 nodes)
─────────────────────────────────────────
./waf --run "routing --use_enhanced_wormhole=true --simTime=60 --nWifis=100"

EXPECTED:
  - 100 nodes → ~20 malicious
  - ~10 wormhole tunnels
  - Lots of traffic

TEST 4: Maximum Traffic (300 second simulation)
────────────────────────────────────────────────
./waf --run "routing --use_enhanced_wormhole=true --simTime=300 --nWifis=50" 2>&1 | tee wormhole_full.log

EXPECTED:
  - 5 minutes of simulation
  - Thousands of packets
  - Complete statistics

═══════════════════════════════════════════════════════════════════════════════

IMPROVEMENTS IN LATEST VERSION:
════════════════════════════════

✅ Attack percentage increased: 10% → 20%
✅ Minimum 6 malicious nodes (was 2)
✅ Strategic node placement (distributed across network, not at edges)
✅ Better coverage of traffic paths

Node Placement Strategy:
  - Old: Nodes 0, 1 (network edges, low traffic)
  - New: Nodes at positions 0%, 10%, 20%, 30%, 40%, 50% of network
        (e.g., for 100 nodes: 0, 10, 20, 30, 40, 50)

═══════════════════════════════════════════════════════════════════════════════

📊 EXPECTED OUTPUT (After Fix):
═══════════════════════════════

=== Enhanced Wormhole Attack Configuration ===
Total Nodes: 100
Malicious Nodes Selected: 6                    ← NEW: More nodes!
Attack Percentage: 20%                         ← NEW: Higher percentage!
Tunnel Bandwidth: 1000Mbps
Tunnel Delay: 1 microseconds
Random Pairing: Yes
Drop Packets: No
Tunnel Routing Packets: Yes
Tunnel Data Packets: Yes
Created 3 wormhole tunnels                     ← NEW: More tunnels!
Attack active from 0s to 30s
============================================


========== WORMHOLE ATTACK STATISTICS ==========
Total Tunnels: 3

Tunnel 0 (Node 10 <-> Node 20):
  Packets Intercepted: 456                     ← NEW: Traffic flowing!
  Packets Tunneled: 456
  Packets Dropped: 0
  Routing Packets Affected: 234
  Data Packets Affected: 222

Tunnel 1 (Node 30 <-> Node 40):
  Packets Intercepted: 389
  Packets Tunneled: 389
  ...

AGGREGATE STATISTICS:
  Total Packets Intercepted: 1234              ← NEW: Success!
  Total Packets Tunneled: 1234
  Total Routing Packets Affected: 567
  Total Data Packets Affected: 667
================================================

Files Created:
  ✅ wormhole-attack-results.csv
  ✅ VanetRoutingCompare.csv

═══════════════════════════════════════════════════════════════════════════════

🔍 VERIFICATION COMMANDS:
═════════════════════════

After running simulation:

# Check if CSV created
ls -lh wormhole-attack-results.csv

# View statistics
cat wormhole-attack-results.csv

# Quick summary
echo "Total tunnels:"
grep -v "TOTAL\|TunnelID" wormhole-attack-results.csv | wc -l

echo "Total packets intercepted:"
grep "TOTAL" wormhole-attack-results.csv | cut -d',' -f4

# Compare with/without wormhole
./waf --run "routing --use_enhanced_wormhole=false --simTime=30"
mv VanetRoutingCompare.csv VanetRoutingCompare_no_wormhole.csv

./waf --run "routing --use_enhanced_wormhole=true --simTime=30"
mv VanetRoutingCompare.csv VanetRoutingCompare_with_wormhole.csv

diff VanetRoutingCompare_no_wormhole.csv VanetRoutingCompare_with_wormhole.csv

═══════════════════════════════════════════════════════════════════════════════

⚡ QUICK TEST (Copy & Paste):
══════════════════════════════

cd ~/Downloads/ns-allinone-3.35/ns-3.35
wget -O scratch/routing.cc https://raw.githubusercontent.com/kavindunisansala/routing/master/routing.cc
./waf build
./waf --run "routing --use_enhanced_wormhole=true --simTime=30" 2>&1 | tee test.log
cat wormhole-attack-results.csv

═══════════════════════════════════════════════════════════════════════════════

🎯 WHAT TO LOOK FOR:
════════════════════

SUCCESS INDICATORS:
  ✅ "Malicious Nodes Selected: 6" (or more)
  ✅ "Created 3 wormhole tunnels" (or more)
  ✅ "Packets Intercepted: XXX" (> 0 for at least one tunnel)
  ✅ wormhole-attack-results.csv file exists
  ✅ CSV has non-zero packet counts

FAILURE INDICATORS:
  ❌ "Packets Intercepted: 0" for all tunnels
  ❌ CSV file not created
  ❌ Simulation crashes

IF STILL NO TRAFFIC:
  - Increase simTime to 60-300 seconds
  - Increase nWifis to 50-100 nodes
  - Check if traffic is being generated (look for "flow" messages)
  - Verify routing protocol is running (AODV/OLSR)

═══════════════════════════════════════════════════════════════════════════════

💡 TROUBLESHOOTING:
═══════════════════

Problem: "Packets Intercepted: 0" even after 30s
Solution: Run longer (60-300s) or add more nodes (--nWifis=100)

Problem: CSV file not created
Solution: Check if simulation reached end (look for statistics output)

Problem: Only one tunnel created
Solution: Normal with 6 nodes → 3 pairs → could make 1-3 tunnels

Problem: Crash with buffer error
Solution: That's the original routing code issue (separate from wormhole)

═══════════════════════════════════════════════════════════════════════════════
