â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ğŸ”§ FIX LINKER ERROR - NS-3 Trying to Build wormhole_attack as Standalone  â•‘
â•‘                    [2025-10-12 16:00 UTC - UPDATED]                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ERROR YOU SAW:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[2491/2539] Linking build/scratch/wormhole_attack_impl
/usr/bin/ld: undefined reference to `main'
collect2: error: ld returned 1 exit status

PROBLEM:
â•â•â•â•â•â•â•â•
NS-3 WAF build system automatically tries to build ALL .cc files in scratch/ 
as standalone executables, regardless of filename. Even wormhole_attack_impl.cc
gets compiled! The file has no main() function - it's meant to be INCLUDED 
in routing.cc, not compiled separately.

SOLUTION: USE .inc EXTENSION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Rename to wormhole_attack.inc - NS-3 NEVER compiles .inc files automatically.
This is the standard way to include implementation files in NS-3 scratch/.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ QUICK FIX (COPY & PASTE ON LINUX):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cd ~/Downloads/ns-allinone-3.35/ns-3.35/scratch

# Rename to .inc (try both possible old names)
mv wormhole_attack.cc wormhole_attack.inc 2>/dev/null || \
mv wormhole_attack_impl.cc wormhole_attack.inc

# Update routing.cc to include the .inc file
sed -i 's/#include "wormhole_attack.*\.cc"/#include "wormhole_attack.inc"/' routing.cc
sed -i 's/#include "wormhole_attack_impl\.cc"/#include "wormhole_attack.inc"/' routing.cc

# Verify
grep "#include.*wormhole" routing.cc

# Build
cd ~/Downloads/ns-allinone-3.35/ns-3.35
./waf clean
./waf build

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXPECTED OUTPUT:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[2539/2539] Linking build/scratch/routing
'build' finished successfully

NO MORE wormhole_attack or wormhole_attack_impl linking attempts!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WHY .inc EXTENSION WORKS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NS-3 WAF Build Rules:
  âŒ *.cc files â†’ Always compiled as executables (need main())
  âŒ *_impl.cc â†’ Still ends in .cc, so STILL compiled!
  âœ… *.inc files â†’ NEVER compiled, safe to include
  âœ… *.hpp files â†’ NEVER compiled, safe to include

Our Final Structure:
  - wormhole_attack.h â†’ Header declarations
  - wormhole_attack.inc â†’ Implementation (included, not compiled)
  - routing.cc â†’ Main executable (has main(), includes .inc)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VERIFICATION:
â•â•â•â•â•â•â•â•â•â•â•â•â•

After build, check that only routing executable exists:

ls -la build/scratch/

Should see:
  âœ… routing (executable)

Should NOT see:
  âŒ wormhole_attack
  âŒ wormhole_attack_impl

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ALTERNATIVE: Pull Latest from GitHub
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

The fix is already in the GitHub repo! You can:

cd ~/Downloads/ns-allinone-3.35/ns-3.35/scratch
git clone https://github.com/kavindunisansala/routing.git temp
cp temp/routing.cc temp/wormhole_attack.h temp/wormhole_attack.inc .
rm -rf temp

cd ~/Downloads/ns-allinone-3.35/ns-3.35
./waf clean
./waf build

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
